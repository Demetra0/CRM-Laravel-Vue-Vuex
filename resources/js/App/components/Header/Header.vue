<template>
    <div class="container">
        <b-navbar>

            <b-navbar-brand class="nav-icon">
                <router-link to="/">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="#ABB2C6" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                              d="M10 17.92C14.9706 17.92 19 14.1323 19 9.46C19 4.78767 14.9706 1 10 1C5.02944 1 1 4.78767 1 9.46V17.9409C1 18.5258 1.47416 19 2.05907 19C2.3053 19 2.54384 18.9142 2.73366 18.7574L3.40413 18.2034C4.52659 17.2759 6.09675 17.2091 7.5021 17.5899C8.2952 17.8048 9.1333 17.92 10 17.92ZM10.8867 7.03667L11.3367 6.81167C11.6414 6.65931 11.9774 6.57999 12.3181 6.57999C13.2831 6.57999 14.1243 7.23675 14.3583 8.17294L14.3687 8.21433C14.5696 9.01815 14.4741 9.87195 14.1035 10.613C13.5529 11.7144 12.5838 12.5587 11.4157 12.9481L10.838 13.1407C10.2959 13.3214 9.70811 13.3105 9.17301 13.1098L8.75347 12.9525C7.69412 12.5553 6.79513 11.8201 6.1955 10.8607L6.05452 10.6351C5.58519 9.88419 5.44139 8.9747 5.65616 8.11562C5.88179 7.21312 6.69268 6.57999 7.62295 6.57999H7.68203C8.02271 6.57999 8.3587 6.65931 8.66341 6.81167L9.11342 7.03667C9.67158 7.31575 10.3286 7.31575 10.8867 7.03667Z"/>
                    </svg>
                </router-link>
            </b-navbar-brand>
            <b-navbar-brand class="mx-auto">
                <router-link to="/" exact>
                    CRM
                </router-link>
            </b-navbar-brand>


            <template v-if="!currentUser">
                <b-collapse id="nav-collapse" is-nav class="nav-link__admin">
                    <b-navbar-nav>
                        <li class="nav-item"><router-link to="/register" class="active">Register</router-link></li>
                    </b-navbar-nav>
                </b-collapse>

                <div class="navbar-logout">
                    <router-link to="/login">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="#ABB2C6" xmlns="http://www.w3.org/2000/svg">
                                <g clip-path="url(#clip0)">
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M15.968 11.969C15.1951 11.3989 14.3444 10.9426 13.442 10.614C14.1342 9.96284 14.6256 9.12715 14.8582 8.20569C15.0909 7.28423 15.055 6.31545 14.7548 5.41373C14.4546 4.51201 13.9027 3.71502 13.1642 3.11686C12.4256 2.51869 11.5314 2.14434 10.587 2.038C10.1959 1.98733 9.8 1.98733 9.40897 2.038C8.4647 2.14456 7.57063 2.51901 6.83224 3.11716C6.09386 3.71531 5.54198 4.51218 5.24173 5.41376C4.94148 6.31534 4.90539 7.284 5.13773 8.20542C5.37006 9.12684 5.86114 9.96259 6.55298 10.614C5.65085 10.9426 4.80053 11.3989 4.02798 11.969C3.70925 12.2031 3.45008 12.509 3.27145 12.8618C3.09283 13.2146 2.99976 13.6045 2.99976 14C2.99976 14.3955 3.09283 14.7854 3.27145 15.1382C3.45008 15.491 3.70925 15.7969 4.02798 16.031C5.75574 17.3098 7.84843 18 9.99796 18C12.1475 18 14.2402 17.3098 15.968 16.031C16.2863 15.7966 16.5451 15.4907 16.7235 15.1379C16.9019 14.7851 16.9948 14.3953 16.9948 14C16.9948 13.6047 16.9019 13.2149 16.7235 12.8621C16.5451 12.5093 16.2863 12.2034 15.968 11.969ZM6.99097 7C6.98995 6.25651 7.26599 5.5393 7.7652 4.98832C8.26441 4.43734 8.95099 4.0921 9.69098 4.01999C9.89745 3.99333 10.1065 3.99333 10.313 4.01999C10.8893 4.08222 11.4354 4.31013 11.8849 4.67612C12.3345 5.04211 12.6684 5.53054 12.8463 6.08231C13.0241 6.63408 13.0383 7.22553 12.8871 7.78519C12.7359 8.34485 12.4258 8.8487 11.9942 9.23581C11.5627 9.62292 11.0282 9.87673 10.4555 9.9665C9.88274 10.0563 9.29628 9.97816 8.767 9.74164C8.23772 9.50512 7.78831 9.12029 7.47311 8.63373C7.15792 8.14718 6.99045 7.57973 6.99097 7ZM14.774 14.424C13.3919 15.4475 11.7177 15.9999 9.99796 15.9999C8.27822 15.9999 6.60397 15.4475 5.22195 14.424C5.15464 14.3756 5.09983 14.3118 5.06201 14.238C5.02419 14.1642 5.00446 14.0824 5.00446 13.9995C5.00446 13.9166 5.02419 13.8348 5.06201 13.761C5.09983 13.6872 5.15464 13.6235 5.22195 13.575C6.60422 12.5521 8.27838 12 9.99796 12C11.7175 12 13.3917 12.5521 14.774 13.575C14.8411 13.6236 14.8958 13.6874 14.9334 13.7612C14.9711 13.835 14.9908 13.9167 14.9908 13.9995C14.9908 14.0824 14.9711 14.164 14.9334 14.2378C14.8958 14.3116 14.8411 14.3754 14.774 14.424Z"/>
                                    <path opacity="0.3" d="M14.7739 14.424C13.3919 15.4475 11.7176 15.9999 9.99789 15.9999C8.27816 15.9999 6.60391 15.4475 5.22189 14.424C5.15458 14.3756 5.09977 14.3118 5.06195 14.238C5.02413 14.1642 5.00439 14.0824 5.00439 13.9995C5.00439 13.9166 5.02413 13.8348 5.06195 13.761C5.09977 13.6872 5.15458 13.6235 5.22189 13.575C6.60416 12.5521 8.27832 12 9.99789 12C11.7175 12 13.3916 12.5521 14.7739 13.575C14.841 13.6236 14.8957 13.6874 14.9334 13.7612C14.9711 13.835 14.9907 13.9167 14.9907 13.9995C14.9907 14.0824 14.9711 14.164 14.9334 14.2378C14.8957 14.3116 14.841 14.3754 14.7739 14.424Z"/>
                                </g>
                                <defs>
                                    <clipPath id="clip0">
                                        <rect width="20" height="20" fill="white"/>
                                    </clipPath>
                                </defs>
                            </svg>
                    </router-link>
                    <router-link to="/login" >Login</router-link>
                </div>
            </template>

            <template v-else>
                <b-collapse id="nav-collapse" is-nav class="nav-link__admin">
                    <b-navbar-nav>
                        <li class="nav-item"><router-link to="/users">Users</router-link></li>
                        <li class="nav-item"><router-link to="/logs">Logs</router-link></li>
                    </b-navbar-nav>
                </b-collapse>

                <div class="navbar-logout">
                    <a href="#!" @click.prevent="logout">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g clip-path="url(#clip0)">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M15.968 11.969C15.1951 11.3989 14.3444 10.9426 13.442 10.614C14.1342 9.96284 14.6256 9.12715 14.8582 8.20569C15.0909 7.28423 15.055 6.31545 14.7548 5.41373C14.4546 4.51201 13.9027 3.71502 13.1642 3.11686C12.4256 2.51869 11.5314 2.14434 10.587 2.038C10.1959 1.98733 9.8 1.98733 9.40897 2.038C8.4647 2.14456 7.57063 2.51901 6.83224 3.11716C6.09386 3.71531 5.54198 4.51218 5.24173 5.41376C4.94148 6.31534 4.90539 7.284 5.13773 8.20542C5.37006 9.12684 5.86114 9.96259 6.55298 10.614C5.65085 10.9426 4.80053 11.3989 4.02798 11.969C3.70925 12.2031 3.45008 12.509 3.27145 12.8618C3.09283 13.2146 2.99976 13.6045 2.99976 14C2.99976 14.3955 3.09283 14.7854 3.27145 15.1382C3.45008 15.491 3.70925 15.7969 4.02798 16.031C5.75574 17.3098 7.84843 18 9.99796 18C12.1475 18 14.2402 17.3098 15.968 16.031C16.2863 15.7966 16.5451 15.4907 16.7235 15.1379C16.9019 14.7851 16.9948 14.3953 16.9948 14C16.9948 13.6047 16.9019 13.2149 16.7235 12.8621C16.5451 12.5093 16.2863 12.2034 15.968 11.969ZM6.99097 7C6.98995 6.25651 7.26599 5.5393 7.7652 4.98832C8.26441 4.43734 8.95099 4.0921 9.69098 4.01999C9.89745 3.99333 10.1065 3.99333 10.313 4.01999C10.8893 4.08222 11.4354 4.31013 11.8849 4.67612C12.3345 5.04211 12.6684 5.53054 12.8463 6.08231C13.0241 6.63408 13.0383 7.22553 12.8871 7.78519C12.7359 8.34485 12.4258 8.8487 11.9942 9.23581C11.5627 9.62292 11.0282 9.87673 10.4555 9.9665C9.88274 10.0563 9.29628 9.97816 8.767 9.74164C8.23772 9.50512 7.78831 9.12029 7.47311 8.63373C7.15792 8.14718 6.99045 7.57973 6.99097 7ZM14.774 14.424C13.3919 15.4475 11.7177 15.9999 9.99796 15.9999C8.27822 15.9999 6.60397 15.4475 5.22195 14.424C5.15464 14.3756 5.09983 14.3118 5.06201 14.238C5.02419 14.1642 5.00446 14.0824 5.00446 13.9995C5.00446 13.9166 5.02419 13.8348 5.06201 13.761C5.09983 13.6872 5.15464 13.6235 5.22195 13.575C6.60422 12.5521 8.27838 12 9.99796 12C11.7175 12 13.3917 12.5521 14.774 13.575C14.8411 13.6236 14.8958 13.6874 14.9334 13.7612C14.9711 13.835 14.9908 13.9167 14.9908 13.9995C14.9908 14.0824 14.9711 14.164 14.9334 14.2378C14.8958 14.3116 14.8411 14.3754 14.774 14.424Z" fill="#ABB2C6"/>
                                <path opacity="0.3" d="M14.7739 14.424C13.3919 15.4475 11.7176 15.9999 9.99789 15.9999C8.27816 15.9999 6.60391 15.4475 5.22189 14.424C5.15458 14.3756 5.09977 14.3118 5.06195 14.238C5.02413 14.1642 5.00439 14.0824 5.00439 13.9995C5.00439 13.9166 5.02413 13.8348 5.06195 13.761C5.09977 13.6872 5.15458 13.6235 5.22189 13.575C6.60416 12.5521 8.27832 12 9.99789 12C11.7175 12 13.3916 12.5521 14.7739 13.575C14.841 13.6236 14.8957 13.6874 14.9334 13.7612C14.9711 13.835 14.9907 13.9167 14.9907 13.9995C14.9907 14.0824 14.9711 14.164 14.9334 14.2378C14.8957 14.3116 14.841 14.3754 14.7739 14.424Z" fill="#ABB2C6"/>
                            </g>
                            <defs>
                                <clipPath id="clip0">
                                    <rect width="20" height="20" fill="white"/>
                                </clipPath>
                            </defs>
                        </svg>
                    </a>
                    <a href="#!" @click.prevent="logout">Logout</a>
                </div>
            </template>
        </b-navbar>
    </div>
</template>

<script>
export default {
    name: 'app-header',
    methods:{
        logout(){
            this.$store.commit('logout');
            this.$store.commit('clearToken');
            this.$router.push('/login');
        }

    },
    computed:{
        currentUser(){
            return this.$store.getters.currentUser
        }
    }
}
</script>

<style lang="scss">
    $mainColor: #007bff;

    .navbar{
        text-align: center;
        height: 100px;
    }
    nav a{
        font-size: 13px;
        color: #ABB2C6;
        outline: none;
        font-weight: 500;
        font-style: normal;
        line-height: 18px;
        text-transform: uppercase;
        text-decoration: none;

        &:hover{
            color: $mainColor;
            text-decoration: none;
        }
    }

    .nav{
        &-link__admin{
            list-style: none;
            padding: 0;
            margin: 0 auto;
            align-items: center;
            justify-content: center;
        }
        &-item{
            padding: 10px;
        }
        &-icon{
            margin-bottom: 5px;
        }
    }
    .router-link-active{
        color: $mainColor;
    }
</style>

